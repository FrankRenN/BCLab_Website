<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add Library Prep</title>
</head>
<body>

<h2>Add Library Prep</h2>
<form id="libraryPrepForm">
    <label>Prep Kit:</label>
    <input type="text" id="prep_kit" required><br><br>

    <label>Date Opened:</label>
    <input type="date" id="date_opened" required><br><br>

    <label>Sample Number:</label>
    <input type="number" id="sample_num" required><br><br>

    <label>Owner:</label>
    <input type="text" id="owner" required><br><br>

    <label>Run ID:</label>
    <input type="number" id="run_id" required><br><br>

    <button type="submit">Add Library Prep</button>
</form>

<script>
document.getElementById("libraryPrepForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const prep_kit = document.getElementById("prep_kit").value.trim();
    const date_opened = document.getElementById("date_opened").value;
    const sample_num = document.getElementById("sample_num").value;
    const owner = document.getElementById("owner").value.trim();
    const run_id = document.getElementById("run_id").value;

    try {
        const response = await fetch("http://localhost:8000/api/data/library_prep", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ prep_kit, date_opened, sample_num, owner, run_id }),
        });

        const result = await response.json();
        alert(result.message || "Library Prep added successfully!");
    } catch (error) {
        console.error("Error adding library prep:", error);
    }
});
</script>

</body>
</html>
